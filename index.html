<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GSAP Crash Course</title>
  <link rel="stylesheet" href="css/main.css">
</head>

<body>
  <main>
    <div class="content">
      <h1 class="anim1"><span>Bridging the gap</span> <span>between dream</span> <span>and reality</span></h1>
      <p class="anim1">Lorem ipsum dolor sit amet, consectetur adipisicing elit. Nulla, sapiente.</p>
      <a href="#" class="anim1" id="cta">Start dreaming</a>
    </div>
  </main>

  <aside>
    <img src="img/swirl.png" alt="Swirl">
  </aside>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.2.4/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.2.4/CSSRulePlugin.min.js"></script>

  <script>

    const rule = CSSRulePlugin.getRule("span:after");

    // No timeline
    // gsap.from('.anim1', { opacity: 0, duration: 1, y: -80, stagger: .4 });
    // gsap.from('img', { opacity: 0, duration: 1, y: 30, delay: 1.2 });
    // gsap.to(rule, {cssRule: {scaleY: 0}, duration: 1 });
    // gsap.from('aside', { opacity: 0, duration: 1, backgroundPosition: '200px 0', delay: 1 });

    // Timeline
    const tl = gsap.timeline({ defaults: { duration: 1 } })
    tl.from('.anim1', { opacity: 0, duration: 1, y: -80, stagger: .6 })
      .to(rule, { cssRule: { scaleY: 0 }, duration: 1 }, "-=2.2")
      .from('aside', { opacity: 0, duration: 1, backgroundPosition: '200px 0', delay: 1 }, "-=1.5")
      .from('img', { opacity: 0, duration: 1, y: 30 }, "-=.5")

    document.getElementById('cta').addEventListener('click', e => {
      tl.reversed() ? tl.play() : tl.reverse();
    })
  </script>
</body>

</html>